//created on: Feb 12, 2016
package com.sample

//list any import classes here.
import function com.sample.DRLLogger.*;

import java.util.List;
import java.util.ArrayList;
import java.util.Map;
import java.lang.String;

import edu.pitt.dbmi.ohdsiv5.db.DrugExposure;
import edu.pitt.dbmi.ohdsiv5.db.DrugEra;
import edu.pitt.dbmi.ohdsiv5.db.Person;

//declare any global variables here
global org.hibernate.Session hibernateSession;


rule "warfarin - ibuprofen ingredient exposure"
    no-loop true
    when
      $de1 : DrugEra(drugConceptId == 1310149)
      $de2 : DrugEra(personId == $de1.getPersonId() && drugConceptId == 1177480)
      $person : Person(personId == $de1.getPersonId() && yearOfBirth <= 1951)
    then	
      System.out.println("matched drug era ids for patient: " + $de1.getPersonId() + " " + $person.getYearOfBirth());
end
